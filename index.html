<script>
const est_alp = "abcdefghijklmnopqrsšzžtuvwõäöüxy";
const ӧ = "ӧö";

function toSaar(text){
  let out = "";
  for (var i = 0; i < text.length; i++) {
    if (est_alp.indexOf(text.charAt(i)) !== -1){
        let bin = est_alp.indexOf(text.charAt(i)).toString(2);
        if (est_alp.indexOf(text.charAt(i+1)) !== -1 && i+1 < text.length){
            bin = bin.padStart(5,"0");
        }
        bin = bin.replace(/0/g, "ӧ").replace(/1/g, "ö");
        out += bin;
    }else{
        out += text.charAt(i);
    }
  }
  return out;
}

function toEst(text){
  let out = "";
  let binbuf = "";
  text += "x";
  for (var i = 0; i < text.length; i++) {
    if (ӧ.indexOf(text.charAt(i)) !== -1){
        binbuf += ӧ.indexOf(text.charAt(i));
        if (binbuf.length > 4){
            let bindec = parseInt(binbuf,2);
            out += est_alp.substring(bindec,bindec+1);
            binbuf = "";
        }
    }else{
        if (binbuf !== ""){
            let bindec = parseInt(binbuf,2);
            out += est_alp.substring(bindec,bindec+1);
            binbuf = "";
        }
        out += text.charAt(i);
    }
  }
  return out.slice(0, -1);
}
</script>